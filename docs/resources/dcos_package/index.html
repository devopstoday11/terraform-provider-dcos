<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="dcos_package"><meta property="og:description" content="Resource: dcos_package Deploys (or upgrades) a service package on DC/OS.
Example Usage data &#34;dcos_package_config&#34; &#34;jenkins-config&#34; { ... }# Deploy a package resource &#34;dcos_package&#34; &#34;jenkins&#34; { config = &#34;${data.dcos_package_config.jenkins-config.config}&#34; app_id = &#34;/jenkins&#34; wait = true wait_duration = &#34;5m&#34; sdk = true } Argument Reference The following arguments are supported
 config (Required) The configuration for the package to be deployed. This should be set to the .config output variable of a dcos_package_config data resource."><meta property="og:type" content="article"><meta property="og:url" content="https://mesosphere.github.io/terraform-provider-dcos/docs/resources/dcos_package/"><title>dcos_package | DC/OS Terraform Provider</title><link rel=icon href=/terraform-provider-dcos/favicon.png type=image/x-icon><link rel=stylesheet href=/terraform-provider-dcos/book.min.6c28d4c7786ace6b760a10f0da9a7fa873292f04f374a4819c43fd684501f609.css integrity="sha256-bCjUx3hqzmt2ChDw2pp/qHMpLwTzdKSBnEP9aEUB9gk="><script defer src=/terraform-provider-dcos/search.min.256f77323547a8bdf40ac5a923fa874318e4ec91a793be855221b4f2929dcc90.js integrity="sha256-JW93MjVHqL30CsWpI/qHQxjk7JGnk76FUiG08pKdzJA="></script><link rel=stylesheet href=https://mesosphere.github.io/terraform-provider-dcos//css/styles.css></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://mesosphere.github.io/terraform-provider-dcos/><span>DC/OS Terraform Provider</span></a></h2><div class=book-search><input type=text placeholder=Search id=book-search-input maxlength=64><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><span>Getting Started</span><ul><li><a href=/terraform-provider-dcos/docs/getting-started/installation/>Installation</a></li><li><a href=/terraform-provider-dcos/docs/getting-started/authentication/>Authentication</a></li></ul></li><li><span>Examples</span><ul></ul></li><li><span>Resources</span><ul><li><a href=/terraform-provider-dcos/docs/resources/dcos_edgelb_v2_pool/>dcos_edgelb_v2_pool</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_job/>dcos_job</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_job_schedule/>dcos_job_schedule</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_marathon_app/>dcos_marathon_app</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_marathon_pod/>dcos_marathon_pod</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_package/ class=active>dcos_package</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_package_repo/>dcos_package_repo</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_security_cluster_oidc/>dcos_security_cluster_oidc</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_security_cluster_saml/>dcos_security_cluster_saml</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_security_org_external_user/>dcos_security_org_external_user</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_security_org_group/>dcos_security_org_group</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_security_org_group_user/>dcos_security_org_group_user</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_security_org_service_account/>dcos_security_org_service_account</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_security_org_user/>dcos_security_org_user</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_security_org_user_grant/>dcos_security_org_user_grant</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_security_secret/>dcos_security_secret</a></li><li><a href=/terraform-provider-dcos/docs/resources/dcos_service_http_request/>dcos_service_http_request</a></li></ul></li><li><span>Data Resources</span><ul><li><a href=/terraform-provider-dcos/docs/data-resources/dcos_package_config/>dcos_package_config</a></li><li><a href=/terraform-provider-dcos/docs/data-resources/dcos_package_version/>dcos_package_version</a></li><li><a href=/terraform-provider-dcos/docs/data-resources/dcos_security_secret_service_account_secret/>dcos_security_secret_service_account_secret</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class="flex align-center justify-between book-header"><label for=menu-control><img src=/terraform-provider-dcos/svg/menu.svg alt=Menu></label>
<strong>dcos_package</strong></header><article class=markdown><h1 id=resource-dcos-package>Resource: dcos_package</h1><p>Deploys (or upgrades) a service package on DC/OS.</p><h2 id=example-usage>Example Usage</h2><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=color:#204a87;font-weight:700>data</span> <span style=color:#4e9a06>&#34;dcos_package_config&#34; &#34;jenkins-config&#34;</span> {
    <span style=color:#000;font-weight:700>...</span>
}<span style=color:#8f5902;font-style:italic>
</span><span style=color:#8f5902;font-style:italic>
</span><span style=color:#8f5902;font-style:italic># Deploy a package 
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;dcos_package&#34; &#34;jenkins&#34;</span> {
<span style=color:#000>    config</span>          <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;${data.dcos_package_config.jenkins-config.config}&#34;</span>
<span style=color:#000>    app_id</span>          <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;/jenkins&#34;</span>
<span style=color:#000>    wait</span>            <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
<span style=color:#000>    wait_duration</span>   <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;5m&#34;</span>
<span style=color:#000>    sdk</span>             <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
}</code></pre></div><h2 id=argument-reference>Argument Reference</h2><p>The following arguments are supported</p><ul><li class=tf_arg id=config><a href=#config><code class=arg>config</code></a>
(Required)
The configuration for the package to be deployed. This should be set to the <a href=/terraform-provider-dcos/docs/data-resources/dcos_package_config/#config><code>.config</code></a> output variable of a <a href=/terraform-provider-dcos/docs/data-resources/dcos_package_config/><code>dcos_package_config</code></a> data resource. (Note that the package name and version is specified in the package configuration).</li><li class=tf_arg id=app_id><a href=#app_id><code class=arg>app_id</code></a>
(Optional, defaults to <code>/&lt;package-name&gt;</code>)
The name of the app to deploy on DC/OS</li><li class=tf_arg id=wait><a href=#wait><code class=arg>wait</code></a>
(Optional, defaults to <code>true</code>)
When true, this resource will block any further action until the package is installed/uninstalled/updated. Set this to <code>false</code> to speed-up deployment, but only if you are not depending on any output variables of this resource.</li><li class=tf_arg id=wait_duration><a href=#wait_duration><code class=arg>wait_duration</code></a>
(Optional, defaults to <code>5m</code>)
How long to wait for a blocking operation to complete. This can be any human-readable time expression (eg. “1h”, “10m”, “20s”)</li><li class=tf_arg id=sdk><a href=#sdk><code class=arg>sdk</code></a>
(Optional, defaults to <code>true</code>)
When true, the provider will use the cosmos SDK API to update / restart the service. When false, any configuration change will cause the service to be uninstalled and re-installed.</li></ul><h2 id=updating-services>Updating Services</h2><p>The dcos_package resource is smart enough to distinguish between configuration changes, version changes or name changes and can react accordingly.</p><h3 id=service-redeployment>Service Redeployment</h3><p>A service will be completely re-deployed (uninstalled and reinstalled) if any of the following changes have occurred:</p><ul><li>The package <code>name</code> has changed</li><li>The <code>app_id</code> has changed</li><li>The configuration has changed and <code>sdk=false</code> meaning that the service is not built using SDK, and therefore the provider cannot use the SDK api to update it.</li></ul><h3 id=service-reconfiguration>Service Reconfiguration</h3><p>A service will be re-configured (“updated” using the cosmos API) if any of the following changes have occurred and sdk=true :</p><ul><li>The package <code>version</code> has changed</li><li>The package configuration has changed</li><li>The configuration <code>checksum</code> property has changed</li></ul><h3 id=service-restart>Service Restart</h3><p>A service will be restarted (by force-restarting the “deploy” plan) if any of the following changes have occurred and <code>sdk=true</code>:</p><ul><li>Only the checksum property has changed (the rest of the configuration has remained intact)</li></ul></article></div><aside class="book-toc levels-6 fixed"><nav id=TableOfContents><ul><li><a href=#resource-dcos-package>Resource: dcos_package</a><ul><li><a href=#example-usage>Example Usage</a></li><li><a href=#argument-reference>Argument Reference</a></li><li><a href=#updating-services>Updating Services</a><ul><li><a href=#service-redeployment>Service Redeployment</a></li><li><a href=#service-reconfiguration>Service Reconfiguration</a></li><li><a href=#service-restart>Service Restart</a></li></ul></li></ul></li></ul></nav></aside></main></body></html>